#!/usr/bin/env jruby

$LOAD_PATH.unshift(File.expand_path(File.dirname(__FILE__) + "/../lib"))
require 'roodi'

def roodi(ruby_files)
  roodi = Runner.new(ClassNameCheck.new, 
                     EmptyRescueBodyCheck.new,
                     ForLoopCheck.new,
                     # MagicNumberCheck.new,
                     MethodNameCheck.new, 
                     MethodLineCountCheck.new)
  ruby_files.each { |file| roodi.check_file(file) }
  roodi.errors.each {|error| puts error}
  puts "\nFound #{roodi.errors.size} errors."
end

pattern = File.join(ARGV[0], "**", "*.rb")
roodi(Dir.glob(pattern))
